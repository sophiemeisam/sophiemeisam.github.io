<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tra Cứu Thần Sát - Hiệp Kỷ Biện Phương Thư</title>
    <style>
        body { font-family: sans-serif; margin: 20px; line-height: 1.6; background-color: #f4f4f9; }
        .container { max-width: 500px; background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        h2 { color: #2c3e50; text-align: center; }
        .form-group { margin-bottom: 15px; }
        label { display: block; font-weight: bold; margin-bottom: 5px; }
        select { width: 100%; padding: 8px; border-radius: 4px; border: 1px solid #ccc; }
        button { width: 100%; padding: 10px; background: #27ae60; color: white; border: none; border-radius: 4px; cursor: pointer; font-size: 16px; }
        button:hover { background: #219150; }
        #result { margin-top: 20px; padding: 15px; border-radius: 4px; background: #e8f6ef; display: none; }
        .res-item { margin-bottom: 8px; border-bottom: 1px solid #d1e7dd; padding-bottom: 5px; }
        strong { color: #c0392b; }
    </style>
</head>
<body>

<div class="container">
    <h2>Tra Cứu Thần Sát</h2>
    
    <div class="form-group">
        <label for="can">Chọn Thiên Can:</label>
        <select id="can">
            <option value="Giáp">Giáp</option>
            <option value="Ất">Ất</option>
            <option value="Bính">Bính</option>
            <option value="Đinh">Đinh</option>
            <option value="Mậu">Mậu</option>
            <option value="Kỷ">Kỷ</option>
            <option value="Canh">Canh</option>
            <option value="Tân">Tân</option>
            <option value="Nhâm">Nhâm</option>
            <option value="Quý">Quý</option>
        </select>
    </div>

    <div class="form-group">
        <label for="chi">Chọn Địa Chi:</label>
        <select id="chi">
            <option value="Tý">Tý</option>
            <option value="Sửu">Sửu</option>
            <option value="Dần">Dần</option>
            <option value="Mão">Mão</option>
            <option value="Thìn">Thìn</option>
            <option value="Tỵ">Tỵ</option>
            <option value="Ngọ">Ngọ</option>
            <option value="Mùi">Mùi</option>
            <option value="Thân">Thân</option>
            <option value="Dậu">Dậu</option>
            <option value="Tuất">Tuất</option>
            <option value="Hợi">Hợi</option>
        </select>
    </div>

    <button onclick="calculate()">Tính Toán</button>

    <div id="result"></div>
</div>

<script>
    // Dữ liệu chuẩn hóa từ yêu cầu của bạn
    const dataLoc = {
        "Giáp": "Dần", "Ất": "Mão", "Bính": "Tỵ", "Đinh": "Ngọ", "Mậu": "Tỵ",
        "Kỷ": "Ngọ", "Canh": "Thân", "Tân": "Dậu", "Nhâm": "Hợi", "Quý": "Tý"
    };

    const dataMa = {
        "Tý": "Dần", "Sửu": "Hợi", "Dần": "Thân", "Mão": "Tỵ", "Thìn": "Dần", "Tỵ": "Hợi",
        "Ngọ": "Thân", "Mùi": "Tỵ", "Thân": "Dần", "Dậu": "Hợi", "Tuất": "Thân", "Hợi": "Tỵ"
    };

    const dataQuyNhan = {
        "Giáp": { am: "Sửu", duong: "Mùi" },
        "Ất": { am: "Tý", duong: "Thân" },
        "Bính": { am: "Hợi", duong: "Dậu" },
        "Đinh": { am: "Dậu", duong: "Hợi" },
        "Mậu": { am: "Mùi", duong: "Sửu" },
        "Kỷ": { am: "Thân", duong: "Tý" },
        "Canh": { am: "Mùi", duong: "Sửu" },
        "Tân": { am: "Ngọ", duong: "Dần" },
        "Nhâm": { am: "Tỵ", duong: "Mão" },
        "Quý": { am: "Mão", duong: "Tỵ" }
    };

    // Hàm Ngũ Hổ Độn để tìm Thiên Can cho Địa Chi (dùng tìm Chính Lộc/Chính Mã)
    function getNguHoDon(canNam, chiMucTieu) {
        const cans = ["Giáp", "Ất", "Bính", "Đinh", "Mậu", "Kỷ", "Canh", "Tân", "Nhâm", "Quý"];
        const chis = ["Dần", "Mão", "Thìn", "Tỵ", "Ngọ", "Mùi", "Thân", "Dậu", "Tuất", "Hợi", "Tý", "Sửu"];
        
        let startCanIndex; // Can của tháng Giêng (Dần)
        if (canNam === "Giáp" || canNam === "Kỷ") startCanIndex = 2; // Bính
        else if (canNam === "Ất" || canNam === "Canh") startCanIndex = 4; // Mậu
        else if (canNam === "Bính" || canNam === "Tân") startCanIndex = 6; // Canh
        else if (canNam === "Đinh" || canNam === "Nhâm") startCanIndex = 8; // Nhâm
        else if (canNam === "Mậu" || canNam === "Quý") startCanIndex = 0; // Giáp

        let targetChiIndex = chis.indexOf(chiMucTieu);
        let resultCanIndex = (startCanIndex + targetChiIndex) % 10;
        return cans[resultCanIndex];
    }

    function calculate() {
        const canVal = document.getElementById("can").value;
        const chiVal = document.getElementById("chi").value;
        const resDiv = document.getElementById("result");

        // 1. Tính Thiên Lộc
        const locChi = dataLoc[canVal];
        const locCan = getNguHoDon(canVal, locChi);

        // 2. Tính Thiên Mã
        const maChi = dataMa[chiVal];
        const maCan = getNguHoDon(canVal, maChi);

        // 3. Tính Quý Nhân
        const qn = dataQuyNhan[canVal];
        const duongQnCan = getNguHoDon(canVal, qn.duong);
        const amQnCan = getNguHoDon(canVal, qn.am);

        resDiv.style.display = "block";
        resDiv.innerHTML = `
            <div class="res-item">Chính Lộc là: <strong>${locCan} ${locChi}</strong></div>
            <div class="res-item">Chính Mã là: <strong>${maCan} ${maChi}</strong></div>
            <div class="res-item">Dương Quý Nhân (3h-17h): <strong>${duongQnCan} ${qn.duong}</strong></div>
            <div class="res-item">Âm Quý Nhân (17h-3h): <strong>${amQnCan} ${qn.am}</strong></div>
        `;
    }
</script>

</body>
</html>
