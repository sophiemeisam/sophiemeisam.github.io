<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gieo Quẻ Dịch Ảo với Đồng Xu</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            padding: 20px;
            background-color: #f0f0f0;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
            margin: 0;
        }
        .container {
            max-width: 400px;
            margin: 0 auto;
            flex-grow: 1;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }
        .bathuong-container {
            display: flex;
            justify-content: center;
            margin-bottom: 20px;
        }
        .bathuong {
            width: 450px; /* Kích thước bát hương, điều chỉnh để phù hợp */
            height: auto;
        }
        .coin-container {
            display: flex;
            justify-content: center;
            gap: 15px; /* Khoảng cách giữa các đồng xu */
            margin-bottom: 20px;
        }
        .coin {
            width: 68px; /* Kích thước đồng xu */
            height: 68px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.3);
            position: relative;
            overflow: hidden;
        }
        .coin img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        .flip {
            animation: flipAnimation 1s ease-in-out;
        }
        @keyframes flipAnimation {
            0% { transform: rotateY(0deg) translateY(0); }
            50% { transform: rotateY(720deg) translateY(-100px); }
            100% { transform: rotateY(0deg) translateY(0); }
        }
        input {
            width: 100%;
            padding: 10px;
            margin-bottom: 10px;
            font-size: 16px; /* Tăng kích thước chữ cho điện thoại */
        }
        button {
            padding: 10px 20px;
            background-color: #4CAF50;
            color: white;
            border: none;
            cursor: pointer;
            font-size: 16px;
        }
        button:hover {
            background-color: #45a049;
        }
        #ket_qua {
            margin-top: 20px;
            text-align: left;
            font-family: monospace;
            font-size: 16px;
        }
        .hao {
            margin-bottom: 10px;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Bát hương ở trên cùng -->
        <div class="bathuong-container">
            <img src="https://sophiemeisam.github.io/bathuong.png" alt="Bát Hương" class="bathuong">
        </div>

        <!-- Đồng xu ngay dưới bát hương -->
        <div class="coin-container">
            <div class="coin" id="coin1"><img src="https://sophiemeisam.github.io/duong.jpg" alt="Coin"></div>
            <div class="coin" id="coin2"><img src="https://sophiemeisam.github.io/duong.jpg" alt="Coin"></div>
            <div class="coin" id="coin3"><img src="https://sophiemeisam.github.io/duong.jpg" alt="Coin"></div>
        </div>

        <!-- Ô nhập sự việc và nút Gieo Quẻ -->
        <div>
            <h2>Gieo Quẻ Dịch</h2>
            <input type="text" id="su_viec" placeholder="Nhập sự việc cần xem">
            <button onclick="gieoQue()">Gieo Quẻ</button>
        </div>

        <!-- Kết quả quẻ ở dưới cùng -->
        <div id="ket_qua"></div>
    </div>

    <script>
        // Link ảnh cho mặt hình và mặt chữ
        const headsImage = 'https://sophiemeisam.github.io/duong.jpg'; // Mặt hình (dương)
        const tailsImage = 'https://sophiemeisam.github.io/am.jpg'; // Mặt chữ (âm)

        function flipCoins() {
            const coins = document.querySelectorAll('.coin img');
            const results = [];
            coins.forEach(coin => {
                coin.parentElement.classList.add('flip');
                const isHeads = Math.random() > 0.5;
                results.push(isHeads ? 'duong' : 'am');
                setTimeout(() => {
                    coin.src = isHeads ? headsImage : tailsImage;
                    coin.parentElement.classList.remove('flip');
                }, 1000);
            });
            return results;
        }

        function gieoQue() {
            const suViec = document.getElementById('su_viec').value;
            const ketQuaDiv = document.getElementById('ket_qua');
            ketQuaDiv.innerHTML = `<p>Sự việc: ${suViec || 'Không nhập'}</p>`;

            const lines = [];
            let haoIndex = 0;

            // Hàm tung xu để tạo một hào
            function tungHao() {
                if (haoIndex < 6) {
                    const coinResults = flipCoins();
                    const sum = coinResults.filter(result => result === 'duong').length;
                    let haoType, haoDisplay;
                    if (sum === 0) {
                        haoType = 'am';
                        haoDisplay = '— — (âm, động)';
                    } else if (sum === 1) {
                        haoType = 'am';
                        haoDisplay = '— — (âm)';
                    } else if (sum === 2) {
                        haoType = 'duong';
                        haoDisplay = '————— (dương)';
                    } else {
                        haoType = 'duong';
                        haoDisplay = '——o—— (dương, động)';
                    }
                    lines.push(haoType);

                    const haoDiv = document.createElement('div');
                    haoDiv.className = 'hao';
                    haoDiv.innerHTML = `Hào ${haoIndex + 1}: ${haoDisplay}`;
                    ketQuaDiv.insertBefore(haoDiv, ketQuaDiv.firstChild.nextSibling);

                    haoIndex++;
                    setTimeout(tungHao, 6000); // Tung tiếp theo sau 6 giây
                }
            }

            // Bắt đầu tung hào đầu tiên
            tungHao();
        }

        // Tự động tung xu khi tải trang
        setInterval(flipCoins, 2000);
    </script>
</body>
</html>