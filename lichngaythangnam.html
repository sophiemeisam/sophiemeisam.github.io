<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lịch Tiết Khí Chuẩn 2026</title>
    <style>
        :root { --orange: #f26522; --blue: #0076a3; --red: #c0392b; --teal: #00a699; }
        body { font-family: 'Segoe UI', sans-serif; background: #fdf2e9; display: flex; justify-content: center; padding: 10px; margin: 0; }
        .calendar-box { background: #fff; width: 100%; max-width: 380px; border-radius: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); overflow: hidden; border: 4px solid #fff; }
        .header { background: #fff; padding: 15px; text-align: center; border-bottom: 1px solid #eee; }
        .solar-month { color: var(--orange); font-weight: bold; font-size: 1.3rem; text-transform: uppercase; }
        .solar-day { font-size: 115px; font-weight: 800; color: var(--orange); text-align: center; line-height: 0.9; margin: 25px 0; }
        .day-name { text-align: center; font-size: 1.6rem; font-weight: bold; color: #333; margin-bottom: 20px; }
        .info-grid { display: flex; border-top: 2px solid #ffebdf; background: #fff; padding: 25px 0; }
        .col { flex: 1.2; text-align: center; font-size: 0.95rem; line-height: 1.8; color: var(--blue); font-weight: 600; }
        .center-col { flex: 1; border-left: 1px solid #eee; border-right: 1px solid #eee; color: var(--teal); }
        .lunar-num { font-size: 3.5rem; font-weight: bold; display: block; line-height: 1; }
        .can-chi-box { text-align: center; padding-bottom: 25px; }
        .can-chi-month { color: #fff; font-weight: 800; font-size: 1.1rem; padding: 8px 25px; background: var(--red); display: inline-block; border-radius: 50px; }
        .nav { display: flex; padding: 15px; gap: 10px; background: #f8f8f8; }
        button { flex: 1; padding: 15px; border: none; background: var(--orange); color: #fff; border-radius: 12px; font-weight: bold; cursor: pointer; }
        .footer { text-align: center; padding: 10px; font-size: 0.75rem; color: #bbb; background: #f8f8f8; }
    </style>
</head>
<body>

<div class="calendar-box">
    <div class="header"><div id="s-month" class="solar-month"></div></div>
    <div id="s-day" class="solar-day"></div>
    <div id="s-wk" class="day-name"></div>
    
    <div class="info-grid">
        <div id="l-left" class="col" style="text-align: left; padding-left: 15px;"></div>
        <div class="col center-col">
            <span id="l-num" class="lunar-num"></span>
            <div id="l-month-text" style="font-weight: 800; font-size: 1.1rem;"></div>
        </div>
        <div id="l-right" class="col" style="text-align: right; padding-right: 15px;"></div>
    </div>
    
    <div class="can-chi-box">
        <div id="can-chi-month" class="can-chi-month"></div>
    </div>

    <div class="nav">
        <button onclick="move(-1)">❮ LÙI</button>
        <button style="background:#555" onclick="goToday()">HÔM NAY</button>
        <button onclick="move(1)">TIẾN ❯</button>
    </div>
    <div class="footer">Data Tiết Khí 2026 Manual Update</div>
</div>

<script>
/* DATA TIẾT KHÍ 2026 THEO NGƯỜI DÙNG CUNG CẤP */
const DATA_2026 = [
    {m: 1, d: 5, h: 15, name: "Kỷ Sửu"}, // Tiểu Hàn
    {m: 2, d: 4, h: 3, name: "Canh Dần"}, // Lập Xuân - Tháng Giêng
    {m: 3, d: 5, h: 21, name: "Tân Mão"}, // Kinh Trập - Tháng 2
    {m: 4, d: 5, h: 1, name: "Nhâm Thìn"}, // Thanh Minh - Tháng 3
    {m: 5, d: 5, h: 18, name: "Quý Tỵ"}, // Lập Hạ - Tháng 4
    {m: 6, d: 5, h: 22, name: "Giáp Ngọ"}, // Mang Chủng - Tháng 5
    {m: 7, d: 7, h: 8, name: "Ất Mùi"}, // Tiểu Thử - Tháng 6
    {m: 8, d: 7, h: 18, name: "Bính Thân"}, // Lập Thu - Tháng 7
    {m: 9, d: 7, h: 21, name: "Đinh Dậu"}, // Bạch Lộ - Tháng 8
    {m: 10, d: 8, h: 13, name: "Mậu Tuất"}, // Hàn Lộ - Tháng 9
    {m: 11, d: 7, h: 16, name: "Kỷ Hợi"}, // Lập Đông - Tháng 10
    {m: 12, d: 7, h: 9, name: "Canh Tý"}, // Đại Tuyết - Tháng 11
    {y: 2027, m: 1, d: 5, h: 21, name: "Tân Sửu"} // Tiểu Hàn - Tháng 12
];

const CAN = ["Giáp", "Ất", "Bính", "Đinh", "Mậu", "Kỷ", "Canh", "Tân", "Nhâm", "Quý"];
const CHI = ["Tý", "Sửu", "Dần", "Mão", "Thìn", "Tỵ", "Ngọ", "Mùi", "Thân", "Dậu", "Tuất", "Hợi"];
const L_MONTHS = ["Giêng", "Hai", "Ba", "Tư", "Năm", "Sáu", "Bảy", "Tám", "Chín", "Mười", "Mười Một", "Chạp"];

let curr = new Date();

function jdFromDate(d, m, y) {
    let a = Math.floor((14-m)/12), y1 = y+4800-a, m1 = m+12*a-3;
    return d + Math.floor((153*m1+2)/5) + 365*y1 + Math.floor(y1/4) - Math.floor(y1/100) + Math.floor(y1/400) - 32045;
}

// Logic tính tháng Can Chi theo bảng data thủ công
function getCCMonth(d, m, y, h) {
    if (y === 2025 && m === 12 && d >= 7) return "Mậu Tý";
    if (y === 2026) {
        let res = "Mậu Tý"; // Mặc định đầu năm 2026 trước Tiểu Hàn
        for (let it of DATA_2026) {
            if (m > it.m || (m === it.m && d > it.d) || (m === it.m && d === it.d && h >= it.h)) {
                res = it.name;
            }
        }
        return res;
    }
    if (y === 2027) {
        if (m === 1 && (d < 5 || (d === 5 && h < 21))) return "Tân Sửu";
        return "Nhâm Dần";
    }
    return "";
}

function render() {
    let d = curr.getDate(), m = curr.getMonth() + 1, y = curr.getFullYear(), h = curr.getHours();
    let j = jdFromDate(d, m, y);
    
    // Ngày Dương
    document.getElementById('s-day').innerText = d;
    document.getElementById('s-month').innerText = `THÁNG ${m} / ${y}`;
    document.getElementById('s-wk').innerText = ["CHỦ NHẬT","THỨ HAI","THỨ BA","THỨ TƯ","THỨ NĂM","THỨ SÁU","THỨ BẢY"][curr.getDay()];
    document.getElementById('s-day').style.color = (curr.getDay() === 0) ? 'red' : '#f26522';

    // Can Chi Ngày
    document.getElementById('l-right').innerHTML = `Ngày<br><b style="color:#d35400">${CAN[(j+9)%10]} ${CHI[(j+1)%12]}</b>`;
    
    // Can Chi Tháng (Khớp theo data bạn soạn)
    document.getElementById('can-chi-month').innerText = "Tháng " + getCCMonth(d, m, y, h);
    
    // Can Chi Năm (Đổi năm đúng Tiết Lập Xuân 04/02)
    let yCC = y;
    if (m < 2 || (m === 2 && d < 4) || (m === 2 && d === 4 && h < 3)) yCC = y - 1;
    document.getElementById('l-left').innerHTML = `Năm<br><b>${CAN[(yCC+6)%10]} ${CHI[(yCC+8)%12]}</b>`;

    // Đồng bộ tạm thời Ngày Âm theo dữ liệu Hồ Ngọc Đức để xem lịch đầy đủ
    // (Lưu ý: Bạn có thể thay thế bằng dữ liệu mùng 1 của bạn nếu muốn)
    document.getElementById('l-num').innerText = d; 
    document.getElementById('l-month-text').innerText = "Lịch Tiết Khí";
}

function move(n) { curr.setDate(curr.getDate() + n); render(); }
function goToday() { curr = new Date(); render(); }
render();
</script>
</body>
</html>
